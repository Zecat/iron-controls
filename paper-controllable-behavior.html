<link rel="import" href="../polymer/polymer.html">

<script>

  window.Zecat = window.Zecat || {};

  Zecat.PaperControllableBehavior = {
    properties: {
      /**
       * If set, controllable will listen for this event from childs
       * and once a control is used, every other are disabled until
       * this event is recieved.
       */
      controlsAwaitForEvent: {
        type: String,
        value: '',
        observer: '_controlsAwaitForEventChange'
      },
      controlsDisabled: {
        type: Boolean,
        value: false,
        notify: true
      }
    },

    listeners: {
      'next-control': 'nextControl',
      'previous-control': 'previousControl',
    },

    disableControls: function() {
      this.controlsDisabled = true;
    },

    eneableControls: function() {
      this.controlsDisabled = false;
    },
    
    nextControl: function() {
      if (!this.controlsDisabled) {
        if(this.controlsAwaitForEvent) {
          this.controlsDisabled = true;
        }
        this.selectNext();
      }
    },

    previousControl: function() {
      if (!this.controlsDisabled) {
        if(this.controlsAwaitForEvent) {
          this.controlsDisabled = true;
        }
        this.selectPrevious();
      }
    },

    _controlsAwaitForEventChange: function(eventName, old) {
      this.unlisten(this, old, 'eneableControls');
      if(!eventName) {
        return;
      }
      this.listen(this, eventName, 'eneableControls');
    },

  };
  
</script>
